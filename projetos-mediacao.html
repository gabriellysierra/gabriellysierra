<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mediação e Encontros | Gabrielly Sierra</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="assets/css/style.css?v=6">
</head>

<body>

    <header>
        <a href="index.html" class="logo-link">
            <img src="assets/img/logo.png" alt="Gabrielly Sierra" class="main-logo">
        </a>
        <nav>
            <ul>
                <li><a href="about.html">sobre</a></li>
                <li><a href="projetos.html" class="active">projetos</a></li>
                <li><a href="atelie.html">ateliê</a></li>
                <li><a href="textos.html">textos</a></li>
                <li><a href="contato.html">contato</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="events-page-wrapper">

            <div class="events-header">
                <h1 class="events-title">Mediação e Encontros Literários</h1>
                <p class="events-subtitle">Participações em festivais literários, feiras e eventos culturais.</p>
            </div>

            <div class="events-grid">

                <!-- Item 1: FliAraxá -->
                <div class="event-card">
                    <div class="event-tag tag-festival">Festival</div>
                    <div class="event-image-container">
                        <img src="assets/img/lfliaraxa2.jpeg" alt="FliAraxá 2025" class="event-image">
                    </div>
                    <div class="event-content">
                        <h3 class="event-card-title">FliAraxá 2025</h3>
                        <div class="event-meta">
                            <i class="fa-regular fa-calendar"></i> 4 out 2025 | <i class="fa-solid fa-location-dot"></i>
                            Araxá, MG
                        </div>
                        <button class="btn-details" data-title="FliAraxá 2025"
                            data-desc="<h3>Mediadora da mesa 'Pontes Narrativas na Literatura Infantil'</h3>
<p><strong><i class='fa-regular fa-calendar'></i> 4 de out de 2025 | <i class='fa-solid fa-location-dot'></i> Araxá, MG</strong></p>

Participantes da mesa: **Ina Arefieva, Laura Gouveia, Luciana Olivier e Dilse Aparecida Rosa**.

A mesa discutiu sobre as relações entre literatura, infância e processos de criação, refletindo sobre a importância da leitura e da literatura na formação de novos leitores."
                            data-images='["assets/img/lfliaraxa2.jpeg", "assets/img/fliaraxa1.jpeg"]'
                            data-item-mode="standard" data-actions='[
                                {"type": "youtube", "url": "https://www.youtube.com/embed/frF3zWfSeis"},
                                {"type": "card", "url": "https://fliaraxa.com.br/pontes-narrativas-na-literatura-infantil/", "title": "Ler Matéria Oficial no site do FliAraxá", "img": "assets/img/fliaraxa1.jpeg"}
                            ]'>
                            Ver Detalhes
                        </button>
                    </div>
                </div>

                <!-- Item 2: Oficina Mediação (Updated to Flyer Mode) -->
                <div class="event-card">
                    <div class="event-tag tag-oficina">Oficina</div>
                    <div class="event-image-container">
                        <img src="assets/img/Oficina_Euclides-24-02-PNAB.png" alt="Oficina Mediação e Criação"
                            class="event-image img-pos-top">
                    </div>
                    <div class="event-content">
                        <h3 class="event-card-title">Oficina "Mediação e Criação"</h3>
                        <div class="event-meta">
                            <i class="fa-regular fa-calendar"></i> 23 fev 2026 | <i
                                class="fa-solid fa-location-dot"></i> São Carlos, SP
                        </div>
                        <button class="btn-details" data-title="Oficina: Mediação e Criação"
                            data-desc="<h3>Oficina teórico-prática ministrada na Biblioteca Pública Euclides da Cunha - São Carlos</h3>
<p><strong><i class='fa-regular fa-calendar'></i> 23 de fev de 2026 | <i class='fa-solid fa-location-dot'></i> Biblioteca Euclides da Cunha - São Carlos, SP</strong></p>

A oficina propôs aos participantes um percurso de investigação sobre a materialidade do livro ilustrado e as estratégias de mediação para a infância, fomentando a formação de novos leitores."
                            data-images='["assets/img/Oficina_Euclides-24-02-PNAB.png"]' data-item-mode="flyer"
                            data-actions='[]'>
                            Ver Detalhes
                        </button>
                    </div>
                </div>

            </div>

            <div class="footer-nav">
                <a href="projetos.html" class="btn-back">Voltar para Projetos</a>
            </div>

        </div>

        <!-- Shared Modal -->
        <div class="modal-overlay" id="project-modal">
            <div class="modal-content-wrapper">
                <div class="modal-header">
                    <h3 class="modal-title" id="modal-title-text">Título do Evento</h3>
                    <button class="modal-close-btn" id="modal-close">&times;</button>
                </div>
                <div class="modal-body">

                    <!-- Gallery Container -->
                    <div class="modal-gallery" id="modal-gallery-container">
                        <!-- Dynamic Images -->
                    </div>

                    <!-- Description -->
                    <div class="modal-desc" id="modal-description">
                        <!-- Dynamic Text -->
                    </div>

                    <!-- New Visual Embeds Container (Replaces old Actions) -->
                    <div class="modal-embeds-grid" id="modal-embeds-container" style="display: none;">
                        <!-- Dynamic Embeds -->
                    </div>

                </div>
            </div>
        </div>

        <!-- Lightbox Overlay for Zoom -->
        <div class="lightbox-overlay" id="lightbox-zoom">
            <img src="" alt="Zoom" class="lightbox-img" id="lightbox-img-element">
        </div>

    </main>

    <footer>
        <div class="social-icons">
            <a href="https://www.instagram.com/gabriellysierra/?hl=pt" target="_blank"><i
                    class="fa-brands fa-instagram"></i></a>
            <a href="https://www.tiktok.com/@gabrielly.sierra" target="_blank"><i class="fa-brands fa-tiktok"></i></a>
            <a href="https://www.youtube.com/@gabriellysierra" target="_blank"><i class="fa-brands fa-youtube"></i></a>
            <a href="https://www.linkedin.com/in/gabriellysierra/" target="_blank"><i
                    class="fa-brands fa-linkedin-in"></i></a>
        </div>
    </footer>

    <!-- Modal Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('project-modal');
            const closeBtn = document.getElementById('modal-close');
            const modalTitle = document.getElementById('modal-title-text');
            const modalDesc = document.getElementById('modal-description');
            const modalGallery = document.getElementById('modal-gallery-container');
            const modalEmbeds = document.getElementById('modal-embeds-container');
            const detailButtons = document.querySelectorAll('.btn-details');

            // Lightbox Elements
            const lightbox = document.getElementById('lightbox-zoom');
            const lightboxImg = document.getElementById('lightbox-img-element');

            // Actions Helper
            const createEmbeds = (actions) => {
                modalEmbeds.innerHTML = '';
                if (!actions || actions.length === 0) {
                    modalEmbeds.style.display = 'none';
                    return;
                }

                modalEmbeds.style.display = 'grid';
                actions.forEach(action => {
                    if (action.type === 'youtube') {
                        const container = document.createElement('div');
                        container.className = 'video-embed-container';
                        container.innerHTML = `<iframe src="${action.url}" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>`;
                        modalEmbeds.appendChild(container); // Append as HTML node
                    } else if (action.type === 'card') {
                        const linkCard = document.createElement('a');
                        linkCard.href = action.url;
                        linkCard.className = 'link-card';
                        linkCard.target = '_blank';
                        linkCard.innerHTML = `
                             <img src="${action.img}" class="link-card-img" alt="Link Preview">
                             <div class="link-card-content">
                                <h4 class="link-card-title">${action.title}</h4>
                                <span class="link-card-meta"><i class="fa-solid fa-arrow-up-right-from-square"></i> Acessar Link Externo</span>
                             </div>
                         `;
                        modalEmbeds.appendChild(linkCard);
                    }
                });
            }

            detailButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Get Data
                    const title = btn.getAttribute('data-title');
                    const desc = btn.getAttribute('data-desc');
                    const images = JSON.parse(btn.getAttribute('data-images') || '[]');
                    const mode = btn.getAttribute('data-item-mode') || 'standard';

                    let actions = [];
                    const actionsAttr = btn.getAttribute('data-actions');
                    if (actionsAttr) {
                        try {
                            actions = JSON.parse(actionsAttr);
                        } catch (e) {
                            console.error("Error parsing actions JSON", e);
                        }
                    }

                    // Populate Modal Title & Desc
                    modalTitle.textContent = title;

                    let formattedDesc = desc
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                        .replace(/\n/g, '<br>');
                    modalDesc.innerHTML = formattedDesc;

                    // Reset Gallery Classes
                    modalGallery.className = 'modal-gallery';
                    if (mode === 'flyer') {
                        modalGallery.classList.add('flyer-mode');
                    }

                    // Populate Gallery
                    modalGallery.innerHTML = '';
                    images.forEach(imgSrc => {
                        const img = document.createElement('img');
                        img.src = imgSrc;
                        img.alt = title;
                        // Add click to zoom
                        img.addEventListener('click', () => {
                            lightboxImg.src = imgSrc;
                            lightbox.classList.add('active');
                        });
                        modalGallery.appendChild(img);
                    });

                    // Populate Embeds
                    createEmbeds(actions);

                    // Show Modal
                    modal.classList.add('active');
                });
            });

            // Close Actions
            const closeModal = () => {
                modal.classList.remove('active');
                // Stop videos when closing
                setTimeout(() => {
                    const iframes = modalEmbeds.querySelectorAll('iframe');
                    iframes.forEach(iframe => {
                        const src = iframe.src;
                        iframe.src = '';
                        iframe.src = src; // Reset source to stop audio/video
                    });
                }, 300);
            };

            closeBtn.addEventListener('click', closeModal);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            // Close Lightbox
            lightbox.addEventListener('click', () => {
                lightbox.classList.remove('active');
            });

            // Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (lightbox.classList.contains('active')) {
                        lightbox.classList.remove('active');
                    } else if (modal.classList.contains('active')) {
                        closeModal();
                    }
                }
            });
        });
    </script>

</body>

</html>